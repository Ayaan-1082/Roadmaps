---
import Icon from '../components/AstroIcon.astro';
import BaseLayout from '../layouts/BaseLayout.astro';
import { getRoadmapIds } from '../lib/roadmap';
import { t } from '../helpers/translate';

const roadmapIds = await getRoadmapIds();
const legacyRoadmapUrls = [...roadmapIds.map((id) => `/${id}/`), '/roadmaps/'];
---

<BaseLayout title={t('pageNotFound')} permalink={'/404'} noIndex={true}>
  <!-- Legacy roadmp pages handling -->
  <script slot='after-header' define:vars={{ legacyRoadmapUrls }}>
    // If it's a roadmap page and it ends with a slash
    // redirect to the same page without the slash
    if (legacyRoadmapUrls.includes(window.location.pathname)) {
      window.location.pathname = window.location.pathname.slice(0, -1);
    }
  </script>

  <div class='bg-gray-100'>
    <div
      class='container flex flex-col items-center justify-center gap-7 py-10 md:flex-row md:py-32'
    >
      <Icon icon='construction' class='hidden md:block' />
      <div class='text-left md:text-left'>
        <h1
          class='bg-gradient-to-t from-black to-gray-600 bg-clip-text text-2xl font-extrabold leading-normal text-transparent md:text-5xl md:leading-normal'
        >
          {t('pageNotFound')}!
        </h1>
        <p class='text-md mb-2 md:text-xl'>
          {t("pageNotFoundDescription")}
        </p>
        <p>
          <a class='text-blue-700 underline' href='/'>{t("homePage")}</a> &middot; <a
            href='/roadmaps'
            class='text-blue-700 underline'>{t("roadmaps")}</a
          > &middot; <a href='/best-practices' class='text-blue-700 underline'
            >{t("bestPractices")}</a
          >
        </p>
      </div>
    </div>
  </div>
</BaseLayout>
